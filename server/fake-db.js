const Product = require('./model/product')

class FakeDb {

constructor() {
    this.products = [
        {
            coverImage: './assets/img/original.jpg',
            name: 'Phone XL',
            price: 799,
            describe: 'Best phone',
            heding1: 'Heding A',
            heding2: 'Heding B',
            heding3: 'Heding C',
            hedingDec1: 'Fantastic A',
            hedingDec2: 'Fantastic B',
            hedingDec3: 'Fantastic C'
        },
        {
            coverImage: './assets/img/original.jpg',
            name: 'Phone Mini',
            price: 699,
            describe: 'A great phone with camera',
            heding1: 'Heding a',
            heding2: 'Heding b',
            heding3: 'Heding c',
            hedingDec1: 'Fantastic a',
            hedingDec2: 'Fantastic b',
            hedingDec3: 'Fantastic c'
        },
        {
            coverImage: './assets/img/original.jpg',
            name: 'Phone standard',
            price: 299,
            describe: 'Normal is best!!',
            heding1: 'Heding AA',
            heding2: 'Heding BB',
            heding3: 'Heding CC',
            hedingDec1: 'Fantastic AA',
            hedingDec2: 'Fantastic BB',
            hedingDec3: 'Fantastic CC'
        },
        {
            coverImage: './assets/img/original.jpg',
            name: 'myPhone',
            price: 8000,
            describe: 'Mine is best!!',
            heding1: 'Heding aa',
            heding2: 'Heding bb',
            heding3: 'Heding cc',
            hedingDec1: 'Fantastic aa',
            hedingDec2: 'Fantastic bb',
            hedingDec3: 'Fantastic cc'
        }]
    }

    async initDb(){
        await this.cleanDb();
        this.pushProductsToDb();
    }

    async cleanDb(){
        await Product.deleteMany({})
    }

    pushProductsToDb() {
        this.products.forEach(
            (product) => {
                const newProduct = new Product(product)
                newProduct.save();
            }
        )
    }

    seeDb() {
        this.pushProductsToDb();
    }
}

module.exports = FakeDb